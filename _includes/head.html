<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover"
  >

  {%- capture seo_tags -%}
    {% seo title=false %}
  {%- endcapture -%}

  <!-- Setup Open Graph image -->

  {% if page.image %}
    {% assign src = page.image.path | default: page.image %}

    {% unless src contains '://' %}
      {%- capture img_url -%}
        {% include media-url.html src=src subpath=page.media_subpath absolute=true %}
      {%- endcapture -%}

      {%- capture old_url -%}{{ src | absolute_url }}{%- endcapture -%}
      {%- capture new_url -%}{{ img_url }}{%- endcapture -%}

      {% assign seo_tags = seo_tags | replace: old_url, new_url %}
    {% endunless %}

  {% elsif site.social_preview_image %}
    {%- capture img_url -%}
      {% include media-url.html src=site.social_preview_image absolute=true %}
    {%- endcapture -%}

    {%- capture og_image -%}
      <meta property="og:image" content="{{ img_url }}" />
    {%- endcapture -%}

    {%- capture twitter_image -%}
      <meta name="twitter:card" content="summary_large_image" />
      <meta property="twitter:image" content="{{ img_url }}" />
    {%- endcapture -%}

    {% assign old_meta_clip = '<meta name="twitter:card" content="summary" />' %}
    {% assign new_meta_clip = og_image | append: twitter_image %}
    {% assign seo_tags = seo_tags | replace: old_meta_clip, new_meta_clip %}
  {% endif %}

  {{ seo_tags }}

  <title>
    {%- unless page.layout == 'home' -%}
      {{ page.title | append: ' | ' }}
    {%- endunless -%}
    {{ site.title }}
  </title>

      {% include favicons.html %}

  <!-- Resource Hints -->
  {% unless site.assets.self_host.enabled %}
    {% for hint in site.data.origin.cors.resource_hints %}
      {% for link in hint.links %}
        <link rel="{{ link.rel }}" href="{{ hint.url }}" {{ link.opts | join: ' ' }}>
      {% endfor %}
    {% endfor %}
  {% endunless %}

  <!-- Bootstrap -->
  {% unless jekyll.environment == 'production' %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css">
  {% endunless %}

  <!-- Theme style -->
  <link rel="stylesheet" href="{{ '/assets/css/jekyll-theme-chirpy.css' | relative_url }}">
  
  <!-- Fallback styles for Chirpy theme -->
  <style>
    /* Basic Chirpy theme styles */
    :root {
      --main-bg: #ffffff;
      --card-bg: #ffffff;
      --text-color: #2a2a2a;
      --text-muted-color: #757575;
      --border-color: #e9ecef;
      --sidebar-bg: #1e1e1e;
      --sidebar-text-color: #ffffff;
    }
    
    [data-mode="dark"] {
      --main-bg: #1b1b1e;
      --card-bg: #2a2a2a;
      --text-color: #ffffff;
      --text-muted-color: #c0c0c0;
      --border-color: #444444;
    }
    
    body {
      font-family: 'Lato', 'Helvetica Neue', Arial, sans-serif;
      color: var(--text-color);
      background-color: var(--main-bg);
      margin: 0;
      padding: 0;
    }
    
    /* Sidebar styles */
    #sidebar {
      position: fixed;
      left: 0;
      top: 0;
      height: 100vh;
      width: 260px;
      background: var(--sidebar-bg);
      color: var(--sidebar-text-color);
      padding: 2rem 1rem;
      z-index: 1000;
      transform: translateX(-100%);
      transition: transform 0.3s ease;
    }
    
    #sidebar.unloaded {
      transform: translateX(0);
    }
    
    @media (min-width: 768px) {
      #sidebar {
        transform: translateX(0);
      }
      
      #main {
        margin-left: 260px;
      }
    }
    
    /* Main content */
    #main {
      min-height: 100vh;
      padding: 2rem;
      transition: margin-left 0.3s ease;
    }
    
    /* Card styles */
    .card {
      background: var(--card-bg);
      border: 1px solid var(--border-color);
      border-radius: 0.5rem;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    /* Post styles */
    .post-preview {
      padding: 1rem 0;
      border-bottom: 1px solid var(--border-color);
    }
    
    .post-title {
      color: var(--text-color);
      text-decoration: none;
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
      display: block;
    }
    
    .post-title:hover {
      color: #007bff;
    }
    
    .post-meta {
      color: var(--text-muted-color);
      font-size: 0.9rem;
      margin-bottom: 0.5rem;
    }
    
    .post-content {
      line-height: 1.6;
    }
    
    /* Navigation */
    .nav-link {
      color: var(--sidebar-text-color);
      text-decoration: none;
      padding: 0.5rem 0;
      display: block;
      border-radius: 0.25rem;
    }
    
    .nav-link:hover {
      background: rgba(255,255,255,0.1);
      color: var(--sidebar-text-color);
      text-decoration: none;
    }
    
    /* Buttons */
    .btn {
      padding: 0.5rem 1rem;
      border-radius: 0.25rem;
      border: none;
      cursor: pointer;
      text-decoration: none;
      display: inline-block;
    }
    
    .btn-primary {
      background: #007bff;
      color: white;
    }
    
    /* Code blocks */
    pre {
      background: #f8f9fa;
      padding: 1rem;
      border-radius: 0.25rem;
      overflow-x: auto;
    }
    
    code {
      background: #f8f9fa;
      padding: 0.2rem 0.4rem;
      border-radius: 0.25rem;
      font-family: 'Monaco', 'Menlo', monospace;
    }
    
    /* Responsive */
    @media (max-width: 767px) {
      #main {
        margin-left: 0;
        padding: 1rem;
      }
      
      #sidebar {
        transform: translateX(-100%);
      }
    }
  </style>

  <!-- Web Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Source+Sans+Pro:wght@400;600;700;900&display=swap">

  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- 3rd-party Dependencies -->

  {% if site.toc and page.toc %}
    <!-- TOC CSS from CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.21.1/tocbot.css">
  {% endif %}

  {% if page.layout == 'post' or page.layout == 'page' or page.layout == 'home' %}
    <!-- Lazy loading polyfill - not required for modern browsers -->
    <!-- <link rel="stylesheet" href="..."> -->
  {% endif %}

  {% if page.layout == 'page' or page.layout == 'post' %}
    <!-- Image Popup -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/glightbox/3.2.0/css/glightbox.min.css">
  {% endif %}

  <!-- Scripts -->

  <script src="{{ '/assets/js/dist/theme.min.js' | relative_url }}"></script>

  {% include js-selector.html lang=lang %}

  {% if jekyll.environment == 'production' %}
    <!-- PWA -->
    {% if site.pwa.enabled %}
      <script
        defer
        src="{{ '/app.min.js' | relative_url }}?baseurl={{ site.baseurl | default: '' }}&register={{ site.pwa.cache.enabled }}"
      ></script>
    {% endif %}

    <!-- Web Analytics -->
    {% for analytics in site.analytics %}
      {% capture str %}{{ analytics }}{% endcapture %}
      {% assign platform = str | split: '{' | first %}
      {% if site.analytics[platform].id and site.analytics[platform].id != empty %}
        {% include analytics/{{ platform }}.html %}
      {% endif %}
    {% endfor %}
  {% endif %}

  {% include metadata-hook.html %}
</head>
