<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover"
  >

  {%- capture seo_tags -%}
    {% seo title=false %}
  {%- endcapture -%}

  <!-- Setup Open Graph image -->

  {% if page.image %}
    {% assign src = page.image.path | default: page.image %}

    {% unless src contains '://' %}
      {%- capture img_url -%}
        {% include media-url.html src=src subpath=page.media_subpath absolute=true %}
      {%- endcapture -%}

      {%- capture old_url -%}{{ src | absolute_url }}{%- endcapture -%}
      {%- capture new_url -%}{{ img_url }}{%- endcapture -%}

      {% assign seo_tags = seo_tags | replace: old_url, new_url %}
    {% endunless %}

  {% elsif site.social.preview_image %}
    {%- capture img_url -%}
      {%- capture src -%}{{ site.social.preview_image }}{%- endcapture -%}
      {% include media-url.html src=src absolute=true %}
    {%- endcapture -%}

    {%- capture old_url -%}{{ site.social.preview_image | absolute_url }}{%- endcapture -%}
    {%- capture new_url -%}{{ img_url }}{%- endcapture -%}

    {% assign seo_tags = seo_tags | replace: old_url, new_url %}
  {% endif %}

  {{ seo_tags }}

  <title>
    {%- unless page.layout == 'home' -%}
      {{ page.title | append: ' | ' }}
    {%- endunless -%}
    {{ site.title }}
  </title>

  {% include favicons.html %}

  {% if site.resources %}
    {% for resource in site.resources %}
      {%- capture url -%}
        {%- if resource.src -%}
          {{ resource.src }}
        {%- else -%}
          {{ resource | relative_url }}
        {%- endif -%}
      {%- endcapture -%}
      <link rel="stylesheet" href="{{ url }}">
    {% endfor %}
  {% endif %}

  <!-- Resource Hints -->
  {% assign origins = site.data.origin[type].resource_hints %}
  {% if origins %}
    {% for origin in origins %}
      {% for link in origin.links %}
        {% assign rel = link.rel %}
        {% if link.opts %}
          {% assign opts = link.opts | join: ' ' %}
          <link rel="{{ rel }}" href="{{ origin.url }}" {{ opts }}>
        {% else %}
          <link rel="{{ rel }}" href="{{ origin.url }}">
        {% endif %}
      {% endfor %}
    {% endfor %}
  {% endif %}

  <!-- Theme style -->
  <link rel="stylesheet" href="{{ '/assets/css/jekyll-theme-chirpy.css' | relative_url }}">

  <!-- Web Font -->
  <link rel="stylesheet" href="{{ site.data.origin[type].webfonts | relative_url }}">

  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="{{ site.data.origin[type].fontawesome.css | relative_url }}">

  <!-- 3rd-party Dependencies -->

  {% if site.toc and page.toc %}
    <link rel="stylesheet" href="{{ site.data.origin[type].toc.css | relative_url }}">
  {% endif %}

  {% if page.layout == 'post' or page.layout == 'page' or page.layout == 'home' %}
    <link rel="stylesheet" href="{{ site.data.origin[type]['lazy-polyfill'].css | relative_url }}">
  {% endif %}

  {% if page.layout == 'page' or page.layout == 'post' %}
    <!-- Image Popup -->
    <link rel="stylesheet" href="{{ site.data.origin[type].glightbox.css | relative_url }}">
  {% endif %}

  <!-- Scripts -->

  <script src="{{ '/assets/js/dist/theme.min.js' | relative_url }}"></script>

  <!-- PWA -->
  {% if site.pwa.enabled %}
    <link rel="manifest" href="{{ '/manifest.json' | relative_url }}">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="{{ site.title }}">
    <meta name="msapplication-TileImage" content="{{ '/assets/img/favicons/mstile-150x150.png' | relative_url }}">
    <meta name="msapplication-config" content="{{ '/assets/img/favicons/browserconfig.xml' | relative_url }}">

    <script
      defer
      src="{{ '/app.min.js' | relative_url }}?baseurl={{ site.baseurl | default: '' }}&register={{ site.pwa.cache.enabled }}"
    ></script>
  {% endif %}

  <!-- Locale -->
  {% if page.lang %}
    <link rel="alternate" hreflang="{{ page.lang }}" href="{{ page.url | absolute_url }}">
  {% endif %}

</head>